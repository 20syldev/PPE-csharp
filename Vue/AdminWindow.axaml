<Window xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="PPE.Controlleur.AdminWindow"
    Title="Administration"
    WindowStartupLocation="CenterScreen"
    MinWidth="800" MinHeight="500"
    Width="1000" Height="650"
    Background="#1E1E1E"
>
    <DockPanel>
        <!-- Menu latéral -->
        <Border DockPanel.Dock="Left"
            Width="200"
            Background="#252526"
            BorderThickness="0,0,1,0"
            BorderBrush="#3C3C3C"
        >
            <DockPanel>
                <!-- Menu items -->
                <StackPanel DockPanel.Dock="Top" Margin="0,16,0,0">
                    <TextBlock Text="Administration"
                        Foreground="#E0E0E0"
                        FontWeight="SemiBold"
                        FontSize="18"
                        Margin="16,0,16,16"
                    />

                    <Button x:Name="_menuAccueil"
                        Content="Accueil"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Left"
                        Padding="16,12"
                        Classes="menuItem active"
                    />

                    <Button x:Name="_menuClients"
                        Content="Gestion Utilisateurs"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Left"
                        Padding="16,12"
                        Classes="menuItem"
                    />
                </StackPanel>

                <!-- Bouton déconnexion en bas -->
                <Border DockPanel.Dock="Bottom" Padding="12" BorderBrush="#3C3C3C" BorderThickness="0,1,0,0">
                    <Button x:Name="_logout"
                        Content="Déconnexion"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Classes="danger"
                        Padding="12,8"
                    />
                </Border>

                <!-- Espace vide au milieu -->
                <Border/>
            </DockPanel>
        </Border>

        <!-- Contenu principal -->
        <Grid x:Name="_content">
            <!-- Page Accueil -->
            <StackPanel x:Name="_pageAccueil"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Spacing="8"
            >
                <TextBlock Text="Bienvenue !"
                    HorizontalAlignment="Center"
                    Foreground="#E0E0E0"
                    FontSize="32"
                    FontWeight="SemiBold"
                />
                <TextBlock x:Name="_welcomeUser"
                    HorizontalAlignment="Center"
                    Foreground="#858585"
                    FontSize="14"
                />
            </StackPanel>

            <!-- Page Gestion Utilisateurs -->
            <DockPanel x:Name="_pageClients" IsVisible="False">
                <!-- Toolbar -->
                <Border DockPanel.Dock="Top"
                    BorderThickness="0,0,0,1"
                    BorderBrush="#3C3C3C"
                    Background="#252526"
                    Padding="16,12"
                >
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <StackPanel Grid.Column="0" VerticalAlignment="Center" Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Utilisateurs" Foreground="#E0E0E0" FontWeight="SemiBold" FontSize="16"/>
                            <TextBlock x:Name="_count" VerticalAlignment="Center" Foreground="#858585" FontSize="13"/>
                        </StackPanel>

                        <TextBox x:Name="_search" Grid.Column="1"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center"
                            Watermark="Rechercher..."
                            Margin="50,0,8,0"
                            MinWidth="120"
                        />

                        <StackPanel Grid.Column="2" VerticalAlignment="Center" Orientation="Horizontal" Spacing="8">
                            <ComboBox x:Name="_filter" HorizontalAlignment="Left" VerticalAlignment="Center" SelectedIndex="0" MinWidth="120">
                                <ComboBoxItem>Tous</ComboBoxItem>
                                <ComboBoxItem>Nom</ComboBoxItem>
                                <ComboBoxItem>Ville</ComboBoxItem>
                                <ComboBoxItem>Code postal</ComboBoxItem>
                            </ComboBox>
                            <Button x:Name="_btnRefresh" VerticalAlignment="Center" Content="Actualiser" Classes="secondary"/>
                            <Button x:Name="_btnDel" VerticalAlignment="Center" Content="Supprimer" IsVisible="False" Classes="danger"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Grille des clients -->
                <Grid>
                    <Border x:Name="_gridBorder"
                        BorderThickness="1,1,1,0"
                        CornerRadius="8,8,0,0"
                        Margin="16,12,16,16"
                        ClipToBounds="True"
                        Background="#252526"
                        BorderBrush="#3C3C3C"
                    >
                        <DataGrid x:Name="_grid"
                            GridLinesVisibility="Horizontal"
                            AutoGenerateColumns="False"
                            CanUserResizeColumns="True"
                            CanUserSortColumns="True"
                            SelectionMode="Single"
                            IsReadOnly="True"
                        >
                            <DataGrid.ContextMenu>
                                <ContextMenu>
                                    <MenuItem x:Name="_menuShowPassword" Header="Afficher le mot de passe"/>
                                    <MenuItem x:Name="_menuShowCode" Header="Afficher le code"/>
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Login" Binding="{Binding Login}" Width="200"/>
                                <DataGridTextColumn Header="Nom" Binding="{Binding Nom}" Width="*"/>
                                <DataGridTextColumn Header="Adresse" Binding="{Binding Adresse}" Width="2*"/>
                                <DataGridTextColumn Header="Ville" Binding="{Binding Ville}" Width="*"/>
                                <DataGridTextColumn Header="Code" Binding="{Binding Code}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>

                    <StackPanel x:Name="_emptyState" HorizontalAlignment="Center" VerticalAlignment="Center" IsVisible="False" Spacing="8">
                        <TextBlock Text="Aucun utilisateur" HorizontalAlignment="Center" Foreground="#858585" FontWeight="SemiBold" FontSize="18"/>
                    </StackPanel>

                    <StackPanel x:Name="_noResults" HorizontalAlignment="Center" VerticalAlignment="Center" IsVisible="False" Spacing="8">
                        <TextBlock Text="Aucun résultat" HorizontalAlignment="Center" Foreground="#858585" FontWeight="SemiBold" FontSize="18"/>
                    </StackPanel>
                </Grid>
            </DockPanel>
        </Grid>
    </DockPanel>

    <Window.Styles>
        <!-- Style menu item -->
        <Style Selector="Button.menuItem">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#858585"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="0"/>
        </Style>
        <Style Selector="Button.menuItem /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="Transparent"/>
        </Style>
        <Style Selector="Button.menuItem:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="#2d2d2d"/>
        </Style>
        <Style Selector="Button.menuItem.active">
            <Setter Property="Foreground" Value="#E0E0E0"/>
        </Style>
        <Style Selector="Button.menuItem.active /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="#3d4a7a"/>
        </Style>
    </Window.Styles>
</Window>
