<Window xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    WindowStartupLocation="CenterScreen"
    MinWidth="600" MinHeight="400"
    Width="900" Height="600"
    Title="Gestion Utilisateurs"
    Background="#1E1E1E"
    x:Class="PPE.Controlleur.MainWindow"
>
    <Grid ColumnDefinitions="200,*">
        <!-- Menu latéral -->
        <Border Grid.Column="0" Background="#252526" BorderBrush="#3C3C3C" BorderThickness="0,0,1,0">
            <DockPanel>
                <!-- Header du menu -->
                <Border DockPanel.Dock="Top" Padding="16,16,16,12">
                    <TextBlock Text="Menu"
                        Foreground="#E0E0E0"
                        FontWeight="SemiBold"
                        FontSize="16"
                    />
                </Border>

                <!-- Bouton déconnexion en bas -->
                <Border DockPanel.Dock="Bottom" Padding="12" BorderBrush="#3C3C3C" BorderThickness="0,1,0,0">
                    <Button x:Name="_logout"
                        Content="Déconnexion"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        Classes="danger"
                        Padding="12,8"
                    />
                </Border>

                <!-- Espace central (pour futurs éléments de menu) -->
                <StackPanel Margin="12,0" Spacing="4">
                    <Button Content="Utilisateurs" Classes="menuItem active" IsEnabled="False" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Padding="12,10"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Contenu principal -->
        <DockPanel Grid.Column="1">
        <!-- Toolbar -->
        <Border DockPanel.Dock="Top"
            BorderThickness="0,0,0,1"
            BorderBrush="#3C3C3C"
            Background="#252526"
            Padding="16,12"
        >
            <Grid ColumnDefinitions="Auto,*,Auto">
                <!-- Gauche: titre -->
                <StackPanel Grid.Column="0"
                    VerticalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="8"
                >
                    <TextBlock Text="Utilisateurs"
                        Foreground="#E0E0E0"
                        FontWeight="SemiBold"
                        FontSize="16"
                    />
                    <TextBlock x:Name="_count"
                        VerticalAlignment="Center"
                        Foreground="#858585"
                        FontSize="13"
                    />
                </StackPanel>

                <!-- Centre: recherche -->
                <TextBox x:Name="_search"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Center"
                    Watermark="Rechercher..."
                    Margin="50,0,8,0"
                    Grid.Column="1"
                    MinWidth="120"
                />

                <!-- Droite: actions -->
                <StackPanel Grid.Column="2"
                    VerticalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="8"
                >
                    <ComboBox x:Name="_filter"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        SelectedIndex="0"
                        MinWidth="120"
                    >
                        <ComboBoxItem>Tous</ComboBoxItem>
                        <ComboBoxItem>Nom</ComboBoxItem>
                        <ComboBoxItem>Ville</ComboBoxItem>
                        <ComboBoxItem>Code postal</ComboBoxItem>
                    </ComboBox>

                    <Button x:Name="_btnRefresh"
                        VerticalAlignment="Center"
                        Content="Actualiser"
                        Classes="secondary"
                    />

                    <Button x:Name="_btnDel"
                        VerticalAlignment="Center"
                        Content="Supprimer"
                        IsVisible="False"
                        Classes="danger"
                    />

                    <Button x:Name="_btnAdd"
                        VerticalAlignment="Center"
                        Content="+ Ajouter"
                        Classes="primary"
                    />
                </StackPanel>
            </Grid>
        </Border>

        <!-- Contenu principal -->
        <Grid>
            <!-- Grille des clients -->
            <Border x:Name="_gridBorder"
                BorderThickness="1,1,1,0"
                CornerRadius="8,8,0,0"
                Margin="16,12,16,16"
                ClipToBounds="True"
                Background="#252526"
                BorderBrush="#3C3C3C"
            >

                <DataGrid x:Name="_grid"
                    GridLinesVisibility="Horizontal"
                    AutoGenerateColumns="False"
                    CanUserResizeColumns="True"
                    CanUserSortColumns="True"
                    SelectionMode="Single"
                    IsReadOnly="True"
                >
                    <DataGrid.ContextMenu>
                        <ContextMenu>
                            <MenuItem x:Name="_menuShowPassword" Header="Afficher le mot de passe"/>
                            <MenuItem x:Name="_menuShowCode" Header="Afficher le code"/>
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Nom" Binding="{Binding Nom}" Width="*"/>
                        <DataGridTextColumn Header="Adresse" Binding="{Binding Adresse}" Width="2*"/>
                        <DataGridTextColumn Header="Ville" Binding="{Binding Ville}" Width="*"/>
                        <DataGridTextColumn Header="Code postal" Binding="{Binding Code}" Width="150"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>

            <!-- État vide (aucun client) -->
            <StackPanel x:Name="_emptyState"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                IsVisible="False"
                Spacing="16"
            >
                <TextBlock Text="Aucun utilisateur"
                    HorizontalAlignment="Center"
                    Foreground="#858585"
                    FontWeight="SemiBold"
                    FontSize="18"
                />
                <TextBlock Text="Commencez par ajouter votre premier utilisateur"
                    HorizontalAlignment="Center"
                    Foreground="#666666"
                    FontSize="13"
                />
                <Button x:Name="_btnAddEmpty"
                    Content="+ Ajouter un utilisateur"
                    HorizontalAlignment="Center"
                    Classes="primary"
                    Padding="16,10"
                />
            </StackPanel>

            <!-- État aucun résultat (recherche) -->
            <StackPanel x:Name="_noResults"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                IsVisible="False"
                Spacing="8"
            >
                <TextBlock Text="Aucun résultat"
                    HorizontalAlignment="Center"
                    Foreground="#858585"
                    FontWeight="SemiBold"
                    FontSize="18"
                />
                <TextBlock Text="Essayez avec d'autres termes de recherche"
                    HorizontalAlignment="Center"
                    Foreground="#666666"
                    FontSize="13"
                />
            </StackPanel>
        </Grid>
    </DockPanel>
    </Grid>
</Window>
